<style>

    #backAndFront .container {
        width: 200px;
        height: 200px;
        position: absolute;
        top: 40vh;
        left: 40vw;
        font-size: 3em;
        perspective: 800px;
    }

    #backAndFront .flipper {
        transform-style: preserve-3d;
        border-width: 1px;
        border-style: solid;
    }

    #backAndFront .background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: white;
    }

    #backAndFront .one {
        z-index: 1000;
    }

    #backAndFront .two {
        z-index: 2000;
    }

    @keyframes flip-animation {
        100% {transform: rotateY(180deg)}
    }

    .flip {
        animation: flip-animation 1s ease-in-out;
        animation-fill-mode: forwards;
    }

    @keyframes flip-back-animation {
        100% {transform: rotateY(-180deg)}
    }

    .flip-back {
        animation: flip-back-animation 1s ease-in-out;
        animation-fill-mode: forwards;
    }

</style>

<div class="slidecounter"></div>
<div class="code"></div>

<div class="container">
    <div class="flipper background"></div>
</div>

<script src="./lib/dynamics.js"></script>
<script src="./slides/3dd3/js/chart.js"></script>
<script src="./slides/3dd3/js/backAndFront.js"></script>
<script>

    /* global slidAR */

    (function () {

        function pie() {
            window._backAndFront_pie("#backAndFront .flipper", 200, 200, "canvas-pie");
        }

        function _pie() {
            window._backAndFront_clean_pie("#backAndFront .flipper");
        }

        const flipOuterStep = slidAR.classUtil.setClassStepWithReverse("#backAndFront .flipper", "flip");
        const flipOuterBackStep = slidAR.classUtil.setClassStepWithReverse("#backAndFront .flipper", "flip-back");

        const flipStep = slidAR.classUtil.setClassStep("#backAndFront .canvas-pie", "flip");

        const secondBackgroundStep = slidAR.createElement.divStep("#backAndFront .flipper", "backAndFront-second", ["background", "two"], "");

        slidAR.steps.set("backAndFront", [
            {f: pie, b: _pie},
            //secondBackgroundStep,
            {f: window._backAndFront_box},
            flipOuterStep.step,
            flipOuterBackStep.step,
            slidAR.steps.combine2StepsDelayed(flipOuterBackStep.step, flipOuterStep.reverseStep, 1000),
        ])

    })()

</script>